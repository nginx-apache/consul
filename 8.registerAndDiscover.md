# 8.register & discover

## 8.1 register

* url:/v1/catalog/register
* method:put
* params:
```php
<?php
    [
        'Datacenter'        =>  'develop',
        'Node'              =>  'test1',
        'Address'           =>  '10.20.70.215',
        'TaggedAddresses'   => [
            'lan'  => '10.20.70.215',
            'wan'  => '111.203.205.32'
        ],
        'NodeMeta'          => [
            'key'       => 'value'
        ],
        'Service'           => [
            'Id'        => '10.20.70.215:6379',
            'Service'   => 'redis',
            'tags'      => ['test'],
            'Address'   => '10.20.70.215',
            'Port'      => 6379,
            'Meta'      =>[
                'auth'  => '123456'
            ],
        ],
        'Check' => [
            'Node'          => 'redis',
            'CheckID'       => 'service:redis:10.20.70.215:6379',
            'Name'          => 'redis health check',
            'Notes'         => 'redis health check',
            'Status'        => 'passing',
            'ServiceID'     => '10.20.70.215:6379',
            'Definition'    => [
                'TCP'                               => '10.20.70.215:6379',
                'Interval'                          => '5s',
                'Timeout'                           => '1s',
                'DeregisterCriticalServiceAfter'    => '30s'
            ]
        ],
        'SkipNodeUpdate' => false
    ]
?>
```

## 8.2 discover

* url:/v1/catalog/service/redis
* method:get
* reponse:
```json
[
  {
    "ID":"","Node":"redis",
    "Address":"10.20.70.215",
    "Datacenter":"develop",
    "TaggedAddresses":{
      "lan":"10.20.70.215",
      "wan":"111.203.205.32"
    },
    "NodeMeta":{
      "key":"value"
    },
    "ServiceKind":"",
    "ServiceID":"10.20.70.215:6379",
    "ServiceName":"redis",
    "ServiceTags":["test"],
    "ServiceAddress":"10.20.70.215",
    "ServiceWeights":{
        "Passing":1,
        "Warning":1
    },
    "ServiceMeta":{
      "auth":"123456"
    },
    "ServicePort":6379,
    "ServiceEnableTagOverride":false,
    "ServiceProxyDestination":"",
    "ServiceProxy":{},
    "ServiceConnect":{},
    "CreateIndex":21571,
    "ModifyIndex":21571
  }
]

```

## 8.3 摘除服务

* url:/v1/catalog/deregister
* method:put
* params:
```php
<?php
[
        'Datacenter'    =>  'develop',
        'Node'          =>  'redis',
        'ServiceID'     =>  '10.20.70.215:6379',
    ]
?>
```